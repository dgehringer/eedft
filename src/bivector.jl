

function compute_bivector_potential(ฯยนยฒ::ScalarField{T, V}, Sยนยฒ::Vec3{ScalarField{T, V}}) where {T, V}
    Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ = Sยนยฒ
    ฯ, Sแตข, Sโฑผ, Sโ = map(density, (ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ))
    S = Sแตข + Sโฑผ + Sโ
    ๐แตข() = ๐(ฯ, S, ฯยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sแตขยนยฒ, Sแตข)
    ๐โฑผ() = ๐(ฯ, S, ฯยนยฒ, Sโยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโฑผ)
    ๐โ() = ๐(ฯ, S, ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sโ)
     
    ฯแตขโบ() = ฯ(ฯ, S, ฯยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sแตขยนยฒ, Sแตข,+)
    ฯแตขโป() = ฯ(ฯ, S, ฯยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sแตขยนยฒ, Sแตข,-)
    ฯโฑผโบ() = ฯ(ฯ, S, ฯยนยฒ, Sโยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโฑผ,+)
    ฯโฑผโป() = ฯ(ฯ, S, ฯยนยฒ, Sโยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโฑผ,-)
    ฯโโบ() = ฯ(ฯ, S, ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sโ,+)
    ฯโโป() = ฯ(ฯ, S, ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sโ,-)
   
    return ฯแตขโบ()
    Bแตขสฒแต() = B(ฯแตขโบ, ฯแตขโป, ฯโฑผโบ, ฯโโป)
    Bโฑผแตโฑ() = B(ฯโฑผโบ, ฯโฑผโป, ฯโโบ, ฯแตขโป)
    Bโโฑสฒ() = B(ฯโโบ, ฯโโป, ฯแตขโบ, ฯโฑผโป)

    return Bแตขสฒแต()

    vแตข() = v(๐โฑผ, ๐โ, ๐แตข, Bแตขสฒแต, ฯโฑผโบ, ฯโโป)
    vโฑผ() = v(๐โ, ๐แตข, ๐โฑผ, Bโฑผแตโฑ, ฯโโบ, ฯแตขโป)
    vโ() = v(๐แตข, ๐โฑผ, ๐โ, Bโโฑสฒ, ฯแตขโบ, ฯโฑผโป)

    Vec3(vแตข(), vโฑผ(), vโ())
end

function ๐(ฯ, S, ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sโ)
   inv(0.5*(ฯ-S) + Sโ) * (ฯยนยฒ*โยฒ(Sโยนยฒ) - Sโยนยฒ*โยฒ(ฯยนยฒ) + Sแตขยนยฒ*โยฒ(Sโฑผยนยฒ) + โ(Sแตขยนยฒ)โโ(Sโฑผยนยฒ) - Sโฑผยนยฒ*โยฒ(Sโฑผยนยฒ) - โ(Sโฑผยนยฒ)โโ(Sโฑผยนยฒ))
end


function ฯ(ฯ, S, ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sโ, op)
   (op((Sแตขยนยฒ*Sโฑผยนยฒ), ฯยนยฒ*Sโยนยฒ)) * inv(0.5*(ฯ-S)+Sโ) 
end

ฯโโบ(ฯ, S, ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sโ) = ฯ(ฯ, S, ฯยนยฒ, Sแตขยนยฒ, Sโฑผยนยฒ, Sโยนยฒ, Sโ,+)

function B(ฯโโบ,ฯโโป, ฯแตขโบ, ฯโฑผโป)
   denom = (1.0 - ฯโโป()*ฯโโบ())
   println(ฯโโบ.order)
   (ฯโฑผโป() - ฯแตขโบ()*ฯโโบ()) / denom , (ฯแตขโบ() - ฯโฑผโป()*ฯโโป()) / denom
end

function v(๐แตข, ๐โฑผ, ๐โ, Bโโฑสฒ, ฯแตขโบ, ฯโฑผโป)
   (Bโสฒ, Bโโฑ) = Bโโฑสฒ()
   0.25 * ((๐โ() - Bโสฒ*๐แตข() - Bโโฑ*๐โฑผ()) / (1.0 - Bโสฒ*ฯแตขโบ() - Bโโฑ*ฯโฑผโป()))
end